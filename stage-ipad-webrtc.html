<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Î¨¥ÎåÄÏö© Ïπ†Ìåê (ÏïÑÏù¥Ìå®Îìú) - WebRTC</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
        }
        
        html, body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            position: fixed;
            /* Safe area Î¨¥ÏãúÌïòÍ≥† Ï†ÑÏ≤¥ ÌôîÎ©¥ ÏÇ¨Ïö© */
            padding: 0 !important;
            margin: 0 !important;
        }
        
        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            touch-action: none;
            background: #000;
            /* ÏÉÅÎã®/ÌïòÎã®Î∞î ÏòÅÏó≠ÍπåÏßÄ ÌôïÏû• */
            -webkit-overflow-scrolling: touch;
        }
        
        /* ÎåÄÍ∏∞ ÌôîÎ©¥: ÏΩîÎìú ÏûÖÎ†• */
        #waitingScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 0.5s ease;
        }
        
        #waitingScreen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .waiting-container {
            text-align: center;
            padding: 40px;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            max-width: 500px;
        }
        
        .waiting-title {
            color: white;
            font-size: 32px;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .waiting-subtitle {
            color: rgba(255,255,255,0.7);
            font-size: 18px;
            margin-bottom: 40px;
        }
        
        .code-input-container {
            margin-bottom: 30px;
        }
        
        .code-input {
            width: 100%;
            max-width: 350px;
            padding: 20px;
            font-size: 36px;
            text-align: center;
            letter-spacing: 12px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .code-input:focus {
            border-color: #667eea;
            background: rgba(102,126,234,0.2);
        }
        
        .connect-btn {
            padding: 18px 60px;
            font-size: 20px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(102,126,234,0.4);
        }
        
        .connect-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102,126,234,0.6);
        }
        
        .connect-btn:active {
            transform: translateY(0);
        }
        
        .connect-btn:disabled {
            background: #666;
            cursor: not-allowed;
            box-shadow: none;
        }
        
        .status-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #666;
            margin: 20px auto 15px;
            transition: all 0.3s ease;
        }
        
        .status-indicator.connecting {
            background: #ffa500;
            box-shadow: 0 0 20px #ffa500;
            animation: pulse 1.5s infinite;
        }
        
        .status-indicator.connected {
            background: #00ff00;
            box-shadow: 0 0 20px #00ff00;
            animation: pulse 2s infinite;
        }
        
        .status-indicator.error {
            background: #ff4444;
            box-shadow: 0 0 20px #ff4444;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }
        
        .status-text {
            color: rgba(255,255,255,0.8);
            font-size: 16px;
            margin-top: 10px;
        }
        
        .network-info {
            margin-top: 30px;
            padding: 20px;
            background: rgba(33,150,243,0.1);
            border-radius: 12px;
            border-left: 4px solid #2196f3;
        }
        
        .network-info-title {
            color: #64b5f6;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .network-info-text {
            color: rgba(255,255,255,0.6);
            font-size: 13px;
            line-height: 1.6;
        }
        
        /* Í≥µÍ∞ú ÌôîÎ©¥: ÏÜêÍ∏ÄÏî® ÌëúÏãú */
        #revealScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000 url('data:image/webp;base64,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') center/cover no-repeat;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            box-shadow: 
                inset 0 0 150px rgba(0,0,0,0.4),
                inset 20px 0 80px rgba(0,0,0,0.3),
                inset -20px 0 80px rgba(0,0,0,0.3),
                inset 0 20px 80px rgba(0,0,0,0.3),
                inset 0 -20px 80px rgba(0,0,0,0.3);
        }
        
        #revealScreen.visible {
            opacity: 1;
            pointer-events: auto;
        }
        
        #handwritingDisplay {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            opacity: 0;
            transform: scale(0.9);
            transition: all 0.5s ease;
        }
        
        #handwritingDisplay.show {
            opacity: 1;
            transform: scale(1);
        }
        
        /* Ïà®Í≤®ÏßÑ Ìä∏Î¶¨Í±∞ Î≤ÑÌäº (ÌôîÎ©¥ 4Í∞ú ÏΩîÎÑà ÎçîÎ∏îÌÉ≠ÏúºÎ°ú ÎåÄÍ∏∞ ÌôîÎ©¥ Î≥µÍ∑Ä) */
        .trigger-zone {
            position: absolute;
            width: 100px;
            height: 100px;
            z-index: 200;
        }
        
        .trigger-zone.top-left { top: 0; left: 0; }
        .trigger-zone.top-right { top: 0; right: 0; }
        .trigger-zone.bottom-left { bottom: 0; left: 0; }
        .trigger-zone.bottom-right { bottom: 0; right: 0; }
        
        /* Ïó∞Í≤∞ ÏÉÅÌÉú ÎØ∏Îãà Ïù∏ÎîîÏºÄÏù¥ÌÑ∞ (Í≥µÍ∞ú ÌôîÎ©¥ÏóêÏÑú Î≥¥ÏûÑ) */
        .mini-status {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #00ff00;
            box-shadow: 0 0 15px #00ff00;
            z-index: 150;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .mini-status.visible {
            opacity: 0.7;
        }
        
        .mini-status.disconnected {
            background: #ff4444;
            box-shadow: 0 0 15px #ff4444;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 0.2; }
        }
    </style>
</head>
<body>
    <!-- ÎåÄÍ∏∞ ÌôîÎ©¥ -->
    <div id="waitingScreen">
        <div class="waiting-container">
            <div class="waiting-title">üé™ Î¨¥ÎåÄÏö© Ïπ†Ìåê</div>
            <div class="waiting-subtitle">Ï°∞Ïàò Ïï±Ïóê ÌëúÏãúÎêú 6ÏûêÎ¶¨ ÏΩîÎìúÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî</div>
            
            <div class="code-input-container">
                <input 
                    type="text" 
                    id="codeInput" 
                    class="code-input" 
                    placeholder="------" 
                    maxlength="6"
                    autocomplete="off"
                    autocapitalize="characters"
                >
            </div>
            
            <button id="connectBtn" class="connect-btn" onclick="connectToPeer()">
                üîó Ïó∞Í≤∞ÌïòÍ∏∞
            </button>
            
            <div class="status-indicator" id="statusIndicator"></div>
            <div class="status-text" id="statusText">ÏΩîÎìúÎ•º ÏûÖÎ†•ÌïòÍ≥† Ïó∞Í≤∞ Î≤ÑÌäºÏùÑ ÎàÑÎ•¥ÏÑ∏Ïöî</div>
            
            <div class="network-info">
                <div class="network-info-title">üì° ÎÑ§Ìä∏ÏõåÌÅ¨ ÏÑ§Ï†ï ÌôïÏù∏</div>
                <div class="network-info-text">
                    ‚Ä¢ Ï°∞Ïàò Ïä§ÎßàÌä∏Ìè∞Í≥º <strong>Í∞ôÏùÄ Wi-Fi</strong>Ïóê Ïó∞Í≤∞ÌïòÏÑ∏Ïöî<br>
                    ‚Ä¢ ÎòêÎäî Ï°∞Ïàò Ïä§ÎßàÌä∏Ìè∞Ïùò <strong>Ìï´Ïä§Ìåü</strong>Ïóê Ïó∞Í≤∞ÌïòÏÑ∏Ïöî<br>
                    ‚Ä¢ Ïó∞Í≤∞ ÌõÑ ÏÜêÍ∏ÄÏî®Í∞Ä Ïã§ÏãúÍ∞ÑÏúºÎ°ú Ï†ÑÏÜ°Îê©ÎãàÎã§
                </div>
            </div>
        </div>
    </div>
    
    <!-- Í≥µÍ∞ú ÌôîÎ©¥ -->
    <div id="revealScreen">
        <img id="handwritingDisplay" alt="ÏòàÏñ∏ ÏÜêÍ∏ÄÏî®">
    </div>
    
    <!-- ÎØ∏Îãà Ïó∞Í≤∞ ÏÉÅÌÉú ÌëúÏãú -->
    <div class="mini-status" id="miniStatus"></div>
    
    <!-- Ïà®Í≤®ÏßÑ Ìä∏Î¶¨Í±∞ ÏòÅÏó≠ (ÎçîÎ∏îÌÉ≠ÏúºÎ°ú ÎåÄÍ∏∞ ÌôîÎ©¥ Î≥µÍ∑Ä) -->
    <div class="trigger-zone top-left" data-corner="1"></div>
    <div class="trigger-zone top-right" data-corner="2"></div>
    <div class="trigger-zone bottom-left" data-corner="3"></div>
    <div class="trigger-zone bottom-right" data-corner="4"></div>

    <script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script>
        let peer = null;
        let connection = null;
        let isConnected = false;
        let lastReceivedImage = null;
        
        const codeInput = document.getElementById('codeInput');
        const connectBtn = document.getElementById('connectBtn');
        const statusIndicator = document.getElementById('statusIndicator');
        const statusText = document.getElementById('statusText');
        const waitingScreen = document.getElementById('waitingScreen');
        const revealScreen = document.getElementById('revealScreen');
        const handwritingDisplay = document.getElementById('handwritingDisplay');
        const miniStatus = document.getElementById('miniStatus');
        
        // Ï†ÄÏû•Îêú ÏΩîÎìú Î∂àÎü¨Ïò§Í∏∞ (ÏûêÎèô Ïû¨Ïó∞Í≤∞Ïö©)
        const savedCode = localStorage.getItem('lastConnectionCode');
        if (savedCode) {
            codeInput.value = savedCode;
            statusText.textContent = 'Ïù¥Ï†Ñ Ïó∞Í≤∞ ÏΩîÎìúÍ∞Ä ÏûÖÎ†•ÎêòÏñ¥ ÏûàÏäµÎãàÎã§';
        }
        
        // ÏΩîÎìú ÏûÖÎ†• ÏûêÎèô Ìè¨Ïª§Ïä§
        codeInput.focus();
        
        // ÏΩîÎìú ÏûÖÎ†• Ïãú ÏûêÎèô ÎåÄÎ¨∏Ïûê Î≥ÄÌôò
        codeInput.addEventListener('input', (e) => {
            e.target.value = e.target.value.toUpperCase();
            if (e.target.value.length === 6) {
                connectBtn.disabled = false;
            }
        });
        
        // Enter ÌÇ§Î°ú Ïó∞Í≤∞
        codeInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && codeInput.value.length === 6) {
                connectToPeer();
            }
        });
        
        // PeerJS Ï¥àÍ∏∞Ìôî Î∞è Ïó∞Í≤∞
        window.connectToPeer = function() {
            const code = codeInput.value.trim().toUpperCase();
            
            if (code.length !== 6) {
                updateStatus('error', 'ÏΩîÎìúÎäî 6ÏûêÎ¶¨Ïó¨Ïïº Ìï©ÎãàÎã§');
                return;
            }
            
            // ÏΩîÎìú Ï†ÄÏû• (ÏûêÎèô Ïû¨Ïó∞Í≤∞Ïö©)
            localStorage.setItem('lastConnectionCode', code);
            
            connectBtn.disabled = true;
            updateStatus('connecting', 'Ïó∞Í≤∞ Ï§ë...');
            
            try {
                // Í∏∞Ï°¥ Ïó∞Í≤∞ Ï†ïÎ¶¨
                if (peer) {
                    peer.destroy();
                }
                
                // ÏÉà Peer ÏÉùÏÑ±
                const myId = 'STAGE-' + Math.random().toString(36).substr(2, 9);
                peer = new Peer(myId, {
                    config: {
                        iceServers: [
                            { urls: 'stun:stun.l.google.com:19302' },
                            { urls: 'stun:stun1.l.google.com:19302' }
                        ]
                    }
                });
                
                peer.on('open', () => {
                    console.log('Peer Ï§ÄÎπÑ ÏôÑÎ£å:', myId);
                    updateStatus('connecting', 'Ï°∞Ïàò Ïï±Ïóê Ïó∞Í≤∞ Ï§ë...');
                    
                    // SenderÏóê Ïó∞Í≤∞ ÏãúÎèÑ
                    const targetId = 'SENDER-' + code;
                    connection = peer.connect(targetId);
                    
                    connection.on('open', () => {
                        isConnected = true;
                        updateStatus('connected', 'Ïó∞Í≤∞ ÏÑ±Í≥µ! ÏÜêÍ∏ÄÏî® ÎåÄÍ∏∞ Ï§ë...');
                        miniStatus.classList.add('visible');
                        console.log('Ï°∞Ïàò Ïï±Í≥º Ïó∞Í≤∞Îê®');
                    });
                    
                    connection.on('data', (data) => {
                        console.log('Îç∞Ïù¥ÌÑ∞ ÏàòÏã†:', data);
                        
                        if (data.type === 'handwriting' && data.image) {
                            lastReceivedImage = data.image;
                            displayHandwriting(data.image);
                        }
                    });
                    
                    connection.on('close', () => {
                        isConnected = false;
                        miniStatus.classList.remove('visible');
                        miniStatus.classList.add('disconnected');
                        updateStatus('error', 'Ïó∞Í≤∞Ïù¥ ÎÅäÏñ¥Ï°åÏäµÎãàÎã§. Îã§Ïãú Ïó∞Í≤∞ÌïòÏÑ∏Ïöî.');
                        connectBtn.disabled = false;
                        console.log('Ïó∞Í≤∞ ÎÅäÍπÄ');
                    });
                    
                    connection.on('error', (err) => {
                        console.error('Ïó∞Í≤∞ Ïò§Î•ò:', err);
                        updateStatus('error', 'Ïó∞Í≤∞ Ïò§Î•ò: ' + err.message);
                        connectBtn.disabled = false;
                    });
                });
                
                peer.on('error', (err) => {
                    console.error('Peer Ïò§Î•ò:', err);
                    let errorMsg = 'Ïò§Î•ò Î∞úÏÉù';
                    
                    if (err.type === 'peer-unavailable') {
                        errorMsg = 'Ï°∞Ïàò Ïï±ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§. ÏΩîÎìúÎ•º ÌôïÏù∏ÌïòÏÑ∏Ïöî.';
                    } else if (err.type === 'network') {
                        errorMsg = 'ÎÑ§Ìä∏ÏõåÌÅ¨ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî';
                    } else {
                        errorMsg = err.message;
                    }
                    
                    updateStatus('error', errorMsg);
                    connectBtn.disabled = false;
                });
                
            } catch (error) {
                console.error('Ïó∞Í≤∞ ÏãúÏûë Ïò§Î•ò:', error);
                updateStatus('error', 'Ïó∞Í≤∞ ÏãúÏûë Ïã§Ìå®: ' + error.message);
                connectBtn.disabled = false;
            }
        };
        
        // ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
        function updateStatus(status, message) {
            statusIndicator.className = 'status-indicator ' + status;
            statusText.textContent = message;
        }
        
        // ÏÜêÍ∏ÄÏî® ÌëúÏãú
        function displayHandwriting(imageData) {
            // Ïù¥ÎØ∏ÏßÄÎ•º 1.2Î∞∞ ÌÅ¨Í∏∞Î°ú Î¶¨ÏÇ¨Ïù¥Ï¶à
            const tempImg = new Image();
            tempImg.onload = () => {
                // ÏûÑÏãú Ï∫îÎ≤ÑÏä§ ÏÉùÏÑ±
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                
                // ÏõêÎ≥∏ ÌÅ¨Í∏∞Ïùò 1.2Î∞∞Î°ú ÏÑ§Ï†ï
                tempCanvas.width = tempImg.width * 1.2;
                tempCanvas.height = tempImg.height * 1.2;
                
                // 1.2Î∞∞ ÌôïÎåÄÌï¥ÏÑú Í∑∏Î¶¨Í∏∞
                tempCtx.drawImage(tempImg, 0, 0, tempCanvas.width, tempCanvas.height);
                
                // ÌôïÎåÄÎêú Ïù¥ÎØ∏ÏßÄÎ•º ÌëúÏãú
                handwritingDisplay.src = tempCanvas.toDataURL('image/png');
                
                // ÎåÄÍ∏∞ ÌôîÎ©¥ Ïà®Í∏∞Í≥† Í≥µÍ∞ú ÌôîÎ©¥ ÌëúÏãú
                waitingScreen.classList.add('hidden');
                revealScreen.classList.add('visible');
                
                // Ïù¥ÎØ∏ÏßÄ ÌéòÏù¥ÎìúÏù∏ Ìö®Í≥º
                setTimeout(() => {
                    handwritingDisplay.classList.add('show');
                }, 100);
                
                console.log('ÏÜêÍ∏ÄÏî® ÌëúÏãú ÏôÑÎ£å (1.2Î∞∞ ÌôïÎåÄ)');
            };
            tempImg.src = imageData;
        }
        
        // ÎåÄÍ∏∞ ÌôîÎ©¥ÏúºÎ°ú Î≥µÍ∑Ä (ÎçîÎ∏îÌÉ≠)
        let lastTapTime = 0;
        let tapCount = 0;
        
        document.querySelectorAll('.trigger-zone').forEach(zone => {
            const handleTap = (e) => {
                e.preventDefault();
                const now = Date.now();
                
                if (now - lastTapTime < 300) {
                    tapCount++;
                    if (tapCount >= 2) {
                        returnToWaiting();
                    }
                } else {
                    tapCount = 1;
                }
                
                lastTapTime = now;
            };
            
            zone.addEventListener('touchstart', handleTap);
            zone.addEventListener('click', handleTap);
        });
        
        // ÎåÄÍ∏∞ ÌôîÎ©¥ÏúºÎ°ú Î≥µÍ∑Ä
        function returnToWaiting() {
            revealScreen.classList.remove('visible');
            handwritingDisplay.classList.remove('show');
            waitingScreen.classList.remove('hidden');
            miniStatus.classList.remove('visible');
            
            console.log('ÎåÄÍ∏∞ ÌôîÎ©¥ÏúºÎ°ú Î≥µÍ∑Ä');
        }
        
        // ÌôîÎ©¥ Í∫ºÏßê Î∞©ÏßÄ Î∞è Ï†ÑÏ≤¥ÌôîÎ©¥ Î™®Îìú
        let wakeLock = null;
        
        // Ï†ÑÏ≤¥ÌôîÎ©¥ ÏßÑÏûÖ ÏãúÎèÑ
        function enterFullscreen() {
            const elem = document.documentElement;
            
            if (elem.requestFullscreen) {
                elem.requestFullscreen().catch(err => {
                    console.log('Ï†ÑÏ≤¥ÌôîÎ©¥ Ïã§Ìå®:', err);
                });
            } else if (elem.webkitRequestFullscreen) { /* Safari */
                elem.webkitRequestFullscreen();
            } else if (elem.webkitEnterFullscreen) { /* iOS Safari */
                elem.webkitEnterFullscreen();
            }
        }
        
        // Wake Lock ÌôúÏÑ±Ìôî
        if ('wakeLock' in navigator) {
            navigator.wakeLock.request('screen').then(lock => {
                wakeLock = lock;
                console.log('ÌôîÎ©¥ Í∫ºÏßê Î∞©ÏßÄ ÌôúÏÑ±Ìôî');
            }).catch(err => {
                console.log('ÌôîÎ©¥ Í∫ºÏßê Î∞©ÏßÄ Ïã§Ìå®:', err);
            });
        }
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï†ÑÏ≤¥ÌôîÎ©¥ ÏãúÎèÑ
        window.addEventListener('load', () => {
            setTimeout(() => {
                enterFullscreen();
            }, 500);
        });
        
        // ÌÑ∞Ïπò ÏãúÏóêÎèÑ Ï†ÑÏ≤¥ÌôîÎ©¥ ÏßÑÏûÖ ÏãúÎèÑ (iOSÎäî ÏÇ¨Ïö©Ïûê Ïï°ÏÖò ÌïÑÏöî)
        document.addEventListener('touchstart', function enableFullscreen() {
            enterFullscreen();
            document.removeEventListener('touchstart', enableFullscreen);
        }, { once: true });
        
        // ÌéòÏù¥ÏßÄ Ïñ∏Î°úÎìú Ïãú Ïó∞Í≤∞ Ï†ïÎ¶¨
        window.addEventListener('beforeunload', () => {
            if (connection) connection.close();
            if (peer) peer.destroy();
        });
    </script>
</body>
</html>
